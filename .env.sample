# ============================================================================
# AI Doc Gen - Environment Configuration
# ============================================================================
# 
# This file contains all configurable environment variables for the AI Doc Gen
# application. Copy this file to `.env` and update the values as needed.
#
# üìã Quick Setup Checklist:
# 1. Copy this file: cp .env.sample .env
# 2. Set your LLM API keys and base URLs
# 3. Configure GitLab integration (for cronjob mode)
# 4. Adjust retry/timeout settings based on your environment
# 5. Enable observability tools if needed (Langfuse)
#
# üöÄ For rate-limited environments, increase retry values:
#   - ANALYZER_AGENT_RETRIES=5
#   - TOOL_FILE_READER_MAX_RETRIES=5
#   - HTTP_RETRY_MAX_ATTEMPTS=10
# ============================================================================

# ------------- Core Application Settings ----------
PYTHONPATH=src
ENVIRONMENT=development                  # Options: development, staging, production

# ------------- Observability & Telemetry ----------
# Langfuse provides LLM observability and analytics
ENABLE_LANGFUSE=false                   # Set to 'true' to enable Langfuse tracking
OTEL_SDK_DISABLED=false                 # OpenTelemetry SDK control

# Langfuse Configuration (only needed if ENABLE_LANGFUSE=true)
LANGFUSE_PUBLIC_KEY=YOUR_PUBLIC_KEY_HERE
LANGFUSE_SECRET_KEY=YOUR_SECRET_KEY_HERE
LANGFUSE_HOST=https://YOUR_LANGFUSE_HOST_HERE
OTEL_EXPORTER_OTLP_ENDPOINT=YOUR_OTEL_ENDPOINT_HERE

# ============================================================================
# ü§ñ LLM AGENTS CONFIGURATION
# ============================================================================

# ------------- Analyzer Agent (Code Analysis) ----------
# The analyzer agent performs code structure, dependency, data flow, and API analysis
ANALYZER_LLM_MODEL=claude-sonnet-4-20250514
ANALYZER_LLM_BASE_URL=YOUR_ANALYZER_BASE_URL_HERE     # e.g., https://api.anthropic.com
ANALYZER_LLM_API_KEY=YOUR_ANALYZER_API_KEY_HERE       # Your LLM provider API key
ANALYZER_PARALLEL_TOOL_CALLS=true                    # Enable parallel tool execution

# Analyzer Agent Behavior Settings
ANALYZER_AGENT_RETRIES=2                # Retries per analysis agent on failure
ANALYZER_LLM_TIMEOUT=180                # Request timeout in seconds (3 minutes)
ANALYZER_LLM_MAX_TOKENS=8192            # Maximum tokens in LLM responses
ANALYZER_LLM_TEMPERATURE=0.0            # Response randomness (0.0=deterministic, 1.0=creative)

# ------------- Documenter Agent (README Generation) ----------
# The documenter agent generates comprehensive README.md files
DOCUMENTER_LLM_MODEL=claude-sonnet-4-20250514
DOCUMENTER_LLM_BASE_URL=YOUR_DOCUMENTER_BASE_URL_HERE
DOCUMENTER_LLM_API_KEY=YOUR_DOCUMENTER_API_KEY_HERE
DOCUMENTER_PARALLEL_TOOL_CALLS=true

# Documenter Agent Behavior Settings
DOCUMENTER_AGENT_RETRIES=2              # Retries for documenter agent on failure
DOCUMENTER_LLM_TIMEOUT=180              # Request timeout in seconds
DOCUMENTER_LLM_MAX_TOKENS=8192          # Maximum tokens in LLM responses
DOCUMENTER_LLM_TEMPERATURE=0.0          # Response randomness (0.0=deterministic)

# ============================================================================
# üîß RETRY & RESILIENCE CONFIGURATION
# ============================================================================

# ------------- Agent Tools Settings ----------
# These settings control the retry behavior for internal tools used by agents
TOOL_FILE_READER_MAX_RETRIES=2          # File reading tool retry attempts
TOOL_LIST_FILES_MAX_RETRIES=2           # File listing tool retry attempts  

# ------------- HTTP Retry Client ----------
# Controls retry behavior for all HTTP requests to LLM providers
# üí° Increase these values if you encounter rate limiting issues
HTTP_RETRY_MAX_ATTEMPTS=5               # Total HTTP retry attempts before failure
HTTP_RETRY_MULTIPLIER=1                 # Exponential backoff multiplier (1s‚Üí2s‚Üí4s‚Üí8s)
HTTP_RETRY_MAX_WAIT_PER_ATTEMPT=60      # Maximum wait between attempts (seconds)
HTTP_RETRY_MAX_TOTAL_WAIT=300           # Maximum total wait time (5 minutes)

# ‚ö° Rate Limiting Solutions:
# If you encounter "max retries exceeded" or "request limit" errors:
# - Increase HTTP_RETRY_MAX_ATTEMPTS to 10+
# - Increase ANALYZER_AGENT_RETRIES to 5+
# - Increase timeout values (ANALYZER_LLM_TIMEOUT=300+)

# ============================================================================
# üîó GITLAB INTEGRATION (Required for Cronjob Mode)
# ============================================================================

# GitLab API Configuration
GITLAB_API_URL=https://git.divar.cloud   # Your GitLab instance URL
GITLAB_USER_NAME=AI Analyzer            # Display name for commits/MRs
GITLAB_USER_USERNAME=agent_doc          # GitLab username for the bot
GITLAB_USER_EMAIL=YOUR_EMAIL_HERE       # Email for Git commits
GITLAB_OAUTH_TOKEN=YOUR_GITLAB_TOKEN_HERE # GitLab access token with repo permissions

# üîë GitLab Token Permissions Required:
# - api (full API access)
# - read_repository (read repo contents)
# - write_repository (create branches, commits)

# ============================================================================
# üìä LOGGING & DEBUGGING
# ============================================================================

APP_VERSION=1.1.0                       # Application version for tracking

# Logging Configuration
CONSOLE_LOG_LEVEL=WARNING               # Console output level
FILE_LOG_LEVEL=INFO                     # File logging level

# Available log levels (from most to least verbose):
# DEBUG    - Detailed debugging information
# INFO     - General information messages
# WARNING  - Warning messages (default for console)
# ERROR    - Error messages only
# CRITICAL - Critical errors only

# üêõ For debugging issues:
# Set CONSOLE_LOG_LEVEL=DEBUG to see detailed operation logs

# ============================================================================
# üöÄ DEPLOYMENT-SPECIFIC RECOMMENDATIONS
# ============================================================================

# Development Environment:
# - Use DEBUG log levels for troubleshooting
# - Lower retry counts for faster feedback
# - Enable Langfuse for observability

# Production Environment:
# - Use WARNING/ERROR log levels
# - Higher retry counts for resilience
# - Monitor with Langfuse/OTEL
# - Set appropriate timeout values based on your LLM provider

# Rate-Limited Environments:
# - ANALYZER_AGENT_RETRIES=5+
# - HTTP_RETRY_MAX_ATTEMPTS=10+
# - HTTP_RETRY_MAX_TOTAL_WAIT=600+
# - ANALYZER_LLM_TIMEOUT=300+

# High-Performance Environments:
# - ANALYZER_PARALLEL_TOOL_CALLS=true
# - DOCUMENTER_PARALLEL_TOOL_CALLS=true
# - Higher ANALYZER_LLM_MAX_TOKENS values
# - Lower timeout values for faster failures
